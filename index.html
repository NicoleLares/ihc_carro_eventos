<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Control por Voz + IHC (Unificado)</title>

    <!-- Fuentes y estilos base -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- Bootstrap (para toasts, modal y componentes del panel) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Estilos unificados -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container main-card">
        <!-- Cabecera / MicrÃ³fono -->
        <header class="header">
            <h1>Control por Voz ðŸ¤–</h1>
            <p class="subtitle">Di <span class="keyword-highlight">"COSMO"</span> para activar la orden.</p>
        </header>

        <section class="voice-panel">
            <div class="mic-container">
                <button id="recordButton" class="mic-btn" title="Iniciar/Detener grabaciÃ³n" aria-pressed="false">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                        <path d="M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"/>
                    </svg>
                </button>
            </div>

            <div class="status-container">
                Estado: <span id="status" class="status-txt">Inactivo</span>
            </div>

            <div class="output">
                <div class="output-item">
                    <h3>TranscripciÃ³n</h3>
                    <p id="recognizedText">-</p>
                </div>
                <div class="output-item command-output">
                    <h3>Comando Identificado</h3>
                    <p id="commandText" class="command">-</p>
                </div>
            </div>
        </section>

        <hr class="divider">

        <!-- Panel de control IHC (botoness) -->
        <section class="ihc-panel">
          <h2 class="panel-title">Panel de Control IHC</h2>
          <div class="row g-3 justify-content-center control-grid">

            <!-- Columna izquierda -->
            <div class="col-12 col-md-3">
              <div class="card small-card">
                <div class="card-body d-flex flex-column justify-content-center align-items-center gap-3">
                  <button class="btn btn-outline-warning btn-control" data-mov="11" title="Giro 360Â° izquierda">
                    <i class="bi bi-arrow-counterclockwise fs-2"></i><br><small>360Â°</small>
                  </button>
                  <button class="btn btn-outline-warning btn-control" data-mov="5" title="Vuelta adelante izquierda">
                    <i class="bi bi-arrow-up-left fs-2"></i><br><small>V. adelante izq.</small>
                  </button>
                  <button class="btn btn-outline-warning btn-control" data-mov="7" title="Vuelta atrÃ¡s izquierda">
                    <i class="bi bi-arrow-down-left fs-2"></i><br><small>V. atrÃ¡s izq.</small>
                  </button>
                </div>
              </div>
            </div>

            <!-- Columna centro -->
            <div class="col-12 col-md-4">
              <div class="card small-card">
                <div class="card-body d-grid gap-3">
                  <div class="d-flex justify-content-center">
                    <button class="btn btn-success btn-control" data-mov="1" title="Adelante">
                      <i class="bi bi-arrow-up fs-2"></i>
                    </button>
                  </div>
                  <div class="d-flex justify-content-center align-items-center gap-3">
                    <button class="btn btn-outline-success btn-control" data-mov="9" title="Giro 90Â° izquierda">
                      <i class="bi bi-arrow-90deg-left fs-2"></i><br><small>90Â°</small>
                    </button>
                    <button class="btn btn-danger stop-btn" data-mov="3" title="Detener">
                      <span class="stop-square"></span>
                    </button>
                    <button class="btn btn-outline-success btn-control" data-mov="8" title="Giro 90Â° derecha">
                      <i class="bi bi-arrow-90deg-right fs-2"></i><br><small>90Â°</small>
                    </button>
                  </div>
                  <div class="d-flex justify-content-center">
                    <button class="btn btn-secondary btn-control" data-mov="2" title="AtrÃ¡s">
                      <i class="bi bi-arrow-down fs-2"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Columna derecha -->
            <div class="col-12 col-md-3">
              <div class="card small-card">
                <div class="card-body d-flex flex-column justify-content-center align-items-center gap-3">
                  <button class="btn btn-outline-primary btn-control" data-mov="10" title="Giro 360Â° derecha">
                    <i class="bi bi-arrow-clockwise fs-2"></i><br><small>360Â°</small>
                  </button>
                  <button class="btn btn-outline-primary btn-control" data-mov="4" title="Vuelta adelante derecha">
                    <i class="bi bi-arrow-up-right fs-2"></i><br><small>V. adelante der.</small>
                  </button>
                  <button class="btn btn-outline-primary btn-control" data-mov="6" title="Vuelta atrÃ¡s derecha">
                    <i class="bi bi-arrow-down-right fs-2"></i><br><small>V. atrÃ¡s der.</small>
                  </button>
                </div>
              </div>
            </div>

          </div>

          <!-- Estatus / Timestamp -->
          <div class="row mt-4 justify-content-center">
            <div class="col-12 col-md-8">
              <div class="card small-card">
                <div class="card-header fw-semibold text-center">Estatus</div>
                <div class="card-body text-center">
                  <div id="statusIHC" class="h5 m-0 status-ihc">â€”</div>
                  <small id="timestamp" class="text-muted d-block"></small>
                </div>
              </div>
            </div>
          </div>

          <!-- BotÃ³n monitoreo -->
          <div class="row mt-3 justify-content-center">
            <div class="col-auto">
              <button id="btn-monitoreo" class="btn btn-info">
                <i class="bi bi-activity me-2"></i> Monitoreo
              </button>
            </div>
          </div>

          <footer class="text-center text-muted mt-4">Derechos reservados Nicole Dayana | 2025</footer>

        </section>
    </div>

    <!-- Toast (Bootstrap) -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080">
      <div id="toast" class="toast text-bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body" id="toast-msg">Mensaje</div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
      </div>
    </div>

    <!-- Modal Monitoreo -->
    <div class="modal fade" id="modalMonitoreo" tabindex="-1" aria-labelledby="modalMonitoreoLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalMonitoreoLabel">Ãšltimos 5 movimientos</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <table class="table table-striped mb-0">
              <thead>
                <tr><th>#</th><th>Movimiento</th><th>Fecha / Hora</th></tr>
              </thead>
              <tbody id="tablaMonitoreo">
                <tr><td colspan="3" class="text-center text-muted">Sin datos</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>
</body>
</html>
